<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>服务器列表详情</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.2/dist/bootstrap-table.min.css">
<script src="https://unpkg.com/bootstrap-table@1.15.2/dist/bootstrap-table.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.15.2/dist/locale/bootstrap-table-zh-CN.min.js"></script><script src="https://unpkg.com/bootstrap-table@1.15.2/dist/bootstrap-table.min.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdn.bootcss.com/jquery.form/4.2.1/jquery.form.min.js"></script>
<div>
    <form class="form-inline" role="form"  action="/getservers" method="get" id="query_form">
    <div class="form-group" style="text-align: left">
        <label  class="col-sm-5 control-label" >服务器ip:</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" name="ip" placeholder="请输入服务器ip">
        </div>
    </div>
    <div class="form-group">
    <label  class="col-sm-5 control-label">应用名:</label>
    <div class="col-sm-10">
        <input type="text" class="form-control" name="servername" placeholder="请输入应用名">
    </div>
</div>
    <div class="form-group">
        <label  class="col-sm-5 control-label">端口号:</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" name="port" placeholder="请输入端口号">
        </div>
    </div>
    <div class="form-group">
        <label  class="col-sm-5 control-label">备注:</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" name="remark" placeholder="请输入备注">
        </div>
    </div>
        <!--<div class="col-sm-10">-->
            <input type="hidden" class="form-control" name="pagenum"  id="input_pagenum">
        <script type="text/javascript">

            $("#"+pageObj[j]).on('click',function(){
                alert("Hello World on");
            });
        </script>
        <!--</div>-->
        <!--<div class="col-sm-10">-->
            <!--<input type="hidden" class="form-control" name="pagesize" value="3">-->
        <!--</div>-->
        <div class="form-group">
                        <div class="col-sm-10">
                <input class="btn btn-default" type="button" onclick="query()"  value="查询">
            </div>
        </div>

    </form></div>
<div>
    <table class="table table-hover">
               <thead>
        <tr>
            <th>id</th>
            <th>服务器ip</th>
            <th>应用名</th>
            <th>端口号</th>
            <th>备注</th>
        </tr>
        </thead>
        <tbody id="server_table">
        </tbody>
    </table>
</div>
<ul class="pagination pagination-lg" style="float: right">
    <li><a href="#">上一页</a></li>
    <li id="pagenums"></li>
    <li><a href="#">下一页</a></li>
</ul>
<script type="text/javascript">
    function query() {

        $.ajax({
            type: "GET",
            dataType: "json",
            cache:false,
            url: "/getservers" ,
            data: $('#query_form').serialize(),
            success:function (data) {
                var resultObj = eval(data);
                var serverObj = resultObj.server;
                var pageObj = resultObj.pageNums;
                console.log(serverObj);
                $("#server_table").text("");
                $("#pagenums").text("");
                for (var i = 0; i < serverObj.length; i++) {
                    var str = '<td>'+serverObj[i].id+'</td>'+'<td>'+serverObj[i].ip+'</td>'+'<td>'+serverObj[i].servername+'</td>'+'<td>'+serverObj[i].port+'</td>'+'<td>'+serverObj[i].remark+'</td>';
                    $("#server_table").append('<tr>'+str+'</tr>')
                }
                for(var j = 0; j < pageObj.length; j++){
                     // $("#query_page").text(pageObj[j]);
                    var str = '<a onclick="query()"  id="'+pageObj[j]+'" href="#">'+pageObj[j]+'</a>';
                    $("#pagenums").append(str)
                }
            }
        })

    }
    $("#"+pageObj[j]).on('click',function(){
        alert("Hello World on");
    });
</script>
</body>
</html>